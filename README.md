# Gex — Voice-Controlled PC Assistant via Telegram

Telegram-бот для голосового управления Windows-ПК и умной транскрипции голосовых сообщений.

Отправляешь голосовое в Telegram — получаешь отформатированный текст в буфере обмена. Начинаешь фразу с «Гекс» — бот выполняет команду на ПК: выключить, перезагрузить, открыть приложение, сделать скриншот и т.д.

## Возможности

### Транскрипция и обработка текста
- Распознавание речи через Groq Whisper (RU/EN)
- Автоочистка: удаление слов-паразитов, расстановка знаков препинания
- Режимы обработки: диктовка, митинг, идея
- Автокопирование результата в буфер обмена

### Голосовое управление ПК
Начни голосовое с **«Гекс»** (или «гексик», «hex»):

| Команда | Пример |
|---------|--------|
| Выключение / перезагрузка | «Гекс, выключи компьютер» |
| Сон / гибернация / блокировка | «Гекс, заблокируй экран» |
| Открыть / закрыть приложение | «Гекс, открой телеграм» |
| Громкость +/- / mute | «Гекс, убавь громкость» |
| Медиа: play/pause, next, prev | «Гекс, следующий трек» |
| Скриншот | «Гекс, сделай скриншот» |
| Открыть URL | «Гекс, открой ютуб» |
| Горячие клавиши | «Гекс, нажми ctrl+z» |
| Ввод текста | «Гекс, напиши привет» |
| Макросы (цепочки команд) | «Гекс, начать рабочий день» |

Опасные команды (выключение, перезагрузка, гибернация) требуют подтверждения.

### Напоминания
- «Гекс, напомни через 30 минут проверить почту»
- Напоминания хранятся в БД и проверяются каждые 30 секунд

### Хранение и поиск
- SQLite с полнотекстовым поиском (FTS5)
- Автокатегоризация, теги, приоритет, анализ настроения
- Ежедневные и еженедельные дайджесты

### Голосовой дневник
- Сохранение записей дневника
- Обзор недели, статистика настроения
- Экспорт в Markdown / JSON

### Заметки
- Сохранение в файлы `notes/` по дате
- Список последних заметок

### Анализ фото
- Отправь фото — получи AI-описание (Groq Vision)
- Можно добавить подпись с вопросом

## Требования

- **Python 3.12+**
- **Windows 10/11** (управление ПК использует Windows API)
- **Telegram Bot Token** — получить у [@BotFather](https://t.me/BotFather)
- **Groq API Key** — получить на [console.groq.com](https://console.groq.com/keys) (бесплатный tier)

## Установка

### 1. Клонировать репозиторий

```bash
git clone https://github.com/T58574/0xVoice2Code.git
cd 0xVoice2Code
```

### 2. Создать виртуальное окружение

```bash
python -m venv .venv
.venv\Scripts\activate
```

### 3. Установить зависимости

```bash
pip install -r requirements.txt
```

### 4. Настроить переменные окружения

Скопировать `.env.example` в `.env` и заполнить:

```bash
copy .env.example .env
```

Открыть `.env` и указать:

```env
# Токен бота (получить у @BotFather в Telegram)
TELEGRAM_BOT_TOKEN=123456:ABC-DEF1234ghIkl-zyx57W2v1u123ew11

# API ключ Groq (получить на https://console.groq.com/keys)
GROQ_API_KEY=gsk_xxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# Твой Telegram user ID (получить у @userinfobot)
TELEGRAM_USER_ID=123456789
```

#### Как получить каждый ключ:

**Telegram Bot Token:**
1. Открыть [@BotFather](https://t.me/BotFather) в Telegram
2. Отправить `/newbot`
3. Задать имя и username бота
4. Скопировать токен

**Groq API Key:**
1. Зарегистрироваться на [console.groq.com](https://console.groq.com)
2. Перейти в API Keys
3. Создать новый ключ

**Telegram User ID:**
1. Открыть [@userinfobot](https://t.me/userinfobot) в Telegram
2. Отправить любое сообщение
3. Скопировать свой ID

### 5. Запустить бота

```bash
python -m app
```

Бот выведет `Bot started. Listening for voice messages...` — готово.

## Использование

### Команды бота в Telegram

| Команда | Описание |
|---------|----------|
| `/start` | Приветствие и список команд |
| `/mode_dictation` | Режим диктовки (по умолчанию) |
| `/mode_meeting` | Режим митинга |
| `/mode_idea` | Режим идей |
| `/note` | Режим заметки |
| `/notes` | Список последних заметок |
| `/diary` | Режим дневника |
| `/week` | Обзор недели (дневник) |
| `/mood` | Статистика настроения |
| `/export` | Экспорт дневника (Markdown) |
| `/export json` | Экспорт дневника (JSON) |
| `/search <запрос>` | Поиск по записям |
| `/history` | Последние записи |
| `/reminders` | Активные напоминания |
| `/limits` | Лимиты Groq API |
| `/commands` | Список голосовых команд |

### Макросы (голосовые цепочки)

| Макрос | Действия |
|--------|----------|
| «Начать рабочий день» | Telegram + Gmail + VS Code |
| «Закончить рабочий день» | Закрыть VS Code + блокировка |
| «Режим музыки» | YouTube Music + громкость 50% |
| «Режим фокуса» | Mute + закрыть Telegram |
| «Режим презентации» | Громкость 70% + Win+P |

## Структура проекта

```
0xVoice2Code/
├── app/
│   ├── __init__.py          # Пакет
│   ├── __main__.py          # Точка входа
│   ├── config.py            # Конфигурация и логирование
│   ├── handlers.py          # Telegram-хендлеры
│   ├── commands.py          # Голосовые команды ПК
│   ├── groq_client.py       # Groq API (Whisper + LLM)
│   ├── prompts.py           # Системные промпты для LLM
│   ├── db.py                # SQLite: хранение, поиск, напоминания
│   ├── diary.py             # Голосовой дневник
│   ├── notes.py             # Файловые заметки
│   ├── scheduler.py         # Планировщик (дайджесты, напоминания)
│   └── vision.py            # Анализ фото через Groq Vision
├── .env.example             # Шаблон переменных окружения
├── requirements.txt         # Зависимости Python
├── LICENSE                  # MIT License
└── README.md
```

## Используемые модели (Groq)

| Модель | Назначение |
|--------|-----------|
| `whisper-large-v3` | Транскрипция речи |
| `llama-3.3-70b-versatile` | Форматирование текста, категоризация, парсинг команд |
| `llama-3.2-90b-vision-preview` | Анализ фотографий |

Все модели работают через [Groq API](https://groq.com) — бесплатный tier покрывает личное использование.

## Лицензия

[MIT](LICENSE)
